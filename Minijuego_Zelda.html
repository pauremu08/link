<!DOCTYPE html>
<head>
<style>

#sprite {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
    }
</style>

</head>
<body>
    <img id="sprite" src="Frame_Link1.png" width="16" height="16">

<script>
    
    let x = 517
    let y = 885
    let PXdeLink = 1
    let PYdeLink = 1

    const canvas = document.gettElementById("mycanvas")
    const ctx = canvas.getContext("2d")
    const image = document.getElementById("Mapa_Dungeon_Link")
    const imagen = document.getElementById('sprite');
    const framesAbajo = ["Frame_Link1.png","Frame_Link2.png"]
    const framesDerecha = ["Frame_Link3.png","Frame_Link4.png"]
    const framesArriba = ["Frame_Link5.png","Frame_Link6.png",]
    const framesIzquierda = ["Frame_Link7.png","Frame_Link8.png"]
    image.addEventListener("load", (e) =>{
        ctx.drawImage(image, x, y, 255, 175, 0, 0, 20, 20 )
    })
    
    const mapas = [[[
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","P"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","_","_","W","_","_","W","_","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["P","_","W","_","_","W","_","_","W","_","_","W","_","P"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","_","_","W","_","_","W","_","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","W","W","_","_","_","_","W","W","_","_","W"]
        ["P","_","_","W","W","_","_","_","_","W","W","_","_","W"]
        ["W","_","_","W","W","_","_","_","_","W","W","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        ]
        [
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        ]
        [
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","P"]
        ["W","_","_","_","_","_","W","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","W","_","_","_","_","_","_","W","_","_","W"]
        ["P","_","_","_","_","_","_","_","_","_","_","_","_","P"]
        ["W","_","_","W","_","_","_","_","_","_","W","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","W","_","_","_","_","_","_","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["P","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","W","_","_","_","_","_","_","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        ]
        [
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","P"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["P","_","_","_","_","_","W","_","_","_","_","_","_","P"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","W","_","_","_","_","_","_","W","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["P","_","_","_","_","_","W","W","_","_","_","_","_","P"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","W","_","_","_","_","_","_","W","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","W","_","_","_","_","_","_","W","_","_","W"]
        ["P","_","_","_","_","_","_","_","_","_","_","_","_","P"]
        ["W","_","_","W","_","_","_","_","_","_","W","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","_","W","_","W","W","_","W","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["P","_","W","_","W","_","W","W","_","W","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","_","W","_","W","W","_","W","_","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        ]
        [
        [
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","_","_","W","W","W","W","W","W"]
        ["W","W","_","_","_","W","_","_","_","_","W","_","W","W"]
        ["W","W","_","W","_","W","_","W","W","_","W","_","W","W"]
        ["W","_","_","W","_","W","_","_","W","_","W","_","_","W"]
        ["W","W","_","W","_","W","W","_","W","_","W","_","W","W"]
        ["W","W","_","W","_","_","_","_","W","_","_","_","W","W"]
        ["W","W","W","W","W","W","_","_","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","P"]
        ["W","_","_","_","_","_","_","_","_","_","_","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","W","W","W","W","W","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","W","W","W","W","W","W","W","W","W","_","W"]
        ["W","_","W","_","_","W","_","_","W","_","_","W","_","W"]
        ["P","_","W","_","W","_","_","_","_","W","_","W","_","W"]
        ["W","_","W","_","_","_","_","_","_","_","_","W","_","W"]
        ["W","_","W","W","W","W","_","_","W","W","W","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        ]
        [
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","W","_","W","_","_","_","_","W"]
        ["W","_","_","_","_","W","_","E","_","W","_","_","_","P"]
        ["W","_","_","_","_","_","W","_","W","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","W","_","_","_","_","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ]
        [
        ["W","W","W","W","W","W","W","W","W","W","W","W","W","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","_","W","W","W","_","_","_","_","W","W","W","_","W"]
        ["W","_","W","_","_","_","_","_","_","_","_","W","_","W"]
        ["P","_","W","_","_","_","_","_","_","_","_","W","_","W"]
        ["W","_","W","_","_","_","_","_","_","_","_","W","_","W"]
        ["W","_","W","W","W","_","_","_","_","W","W","W","_","W"]
        ["W","_","_","_","_","_","_","_","_","_","_","_","_","W"]
        ["W","W","W","W","W","W","P","P","W","W","W","W","W","W"]
        ]
        ]
        ]

    let FilaDeMapas = 1
    let MapaDeLaFila = 2
    let mapaActual = mapas[FilaDeMapas,MapaDeLaFila]

    function caminarArriba(){
        setInterval(() => {
            currentFrame = (currentFrame + 1) % frames.length;
            sprite.src = framesArriba[currentFrame];
        }, 200);
        setInterval(() => {
            if (mapa[PYdeLink+1,PXdeLink] = "_")
                {
                PYdeLink =+1
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.top = (posicionActual + 16)
            };
            else if (mapa[PYdeLink+1,PXdeLink] = "P")
                {
                PYdeLink = 9
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.top = 450
                y =+ 175
                ctx.drawImage(image, x, y, 255, 175, 0, 0, 20, 20 )
                let FilaDeMapas =+1
                let mapaActual = mapas[FilaDeMapas,MapaDeLaFila]
            };
        }, 400);}
    
        function caminarAbajo(){
        setInterval(() => {
            currentFrame = (currentFrame + 1) % frames.length;
            sprite.src = framesAbajo[currentFrame];
        }, 200);
        setInterval(() => {
            if (mapa[PYdeLink-1,PXdeLink] = "_")
                {
                PYdeLink =-1
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.top = (posicionActual - 16)
            };
            else if (mapa[PYdeLink-1,PXdeLink] = "P")
                {
                PYdeLink = 9
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.top = 450
                y =+ 175
                ctx.drawImage(image, x, y, 255, 175, 0, 0, 20, 20 )
                let FilaDeMapas =-1
                let mapaActual = mapas[FilaDeMapas,MapaDeLaFila]
            };
        }, 400);}
    
        function caminarIzquierda(){
        setInterval(() => {
            currentFrame = (currentFrame + 1) % frames.length;
            sprite.src = framesIzquierda[currentFrame];
        }, 200);
        setInterval(() => {
            if (mapa[PYdeLink,PXdeLink-1] = "_")
                {
                PXdeLink =-1
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.left = (posicionActual - 16)
            };
            else if (mapa[PYdeLink+1,PXdeLink] = "P")
                {
                PYdeLink = 9
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.top = 450
                y =+ 175
                ctx.drawImage(image, x, y, 255, 175, 0, 0, 20, 20 )
                let MapaDeLaFila =-1
                let mapaActual = mapas[FilaDeMapas,MapaDeLaFila]
            };
        }, 400);}
    
        function caminarDerecha(){
        setInterval(() => {
            currentFrame = (currentFrame + 1) % frames.length;
            sprite.src = framesDerecha[currentFrame];
        }, 200);
        setInterval(() => {
            if (mapa[PYdeLink,PXdeLink+1] = "_")
                {
                PXdeLink =+1
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.left = (posicionActual + 16)
            };
            else if (mapa[PYdeLink+1,PXdeLink] = "P")
                {
                PYdeLink = 9
                const estiloActual = window.getComputedStyle(imagen);
                const posicionActual = parseInt(estiloActual.left);
                imagen.style.top = 450
                y =+ 175
                ctx.drawImage(image, x, y, 255, 175, 0, 0, 20, 20 )
                let MapaDeLaFila =+1
                let mapaActual = mapas[FilaDeMapas,MapaDeLaFila]
            };
        }, 400);}

    document.addEventListener("keydown", function(event) {
        if (event.key === "w" || event.key === "W") {
            caminarArriba();
        }
        if (event.key === "a" || event.key === "A") {
            caminarIzquierda();
        }
        if (event.key === "s" || event.key === "S") {
            caminarAbajo();
        }
        if (event.key === "d" || event.key === "D") {
            caminarDerecha();
        } });
    


</script>
</body>
</html>